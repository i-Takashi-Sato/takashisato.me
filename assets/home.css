/* =========================================================
   THE SCRIPT NOTE (LIPSTICK VANDALISM)
   Updated: Fixed clipping issues (Keep it inside the viewport)
   ========================================================= */
body.home #archive .script-note {
  position: absolute;
  z-index: 20; /* On top of EVERYTHING */
  pointer-events: none;
  
  font-family: var(--font-script);
  /* Adjusted size to prevent clipping on edges */
  font-size: clamp(5rem, 10vw, 12rem); 
  line-height: 1;
  text-align: center;
  
  /* LIPSTICK EFFECT */
  color: var(--accent);
  opacity: 0.9;
  
  /* Greasy, smeared texture */
  text-shadow: 
    0 0 5px rgba(217, 4, 41, 0.5),
    2px 2px 0px rgba(100, 0, 0, 0.3);

  mix-blend-mode: normal; 

  transition: all 0.4s var(--ease-punk);
  will-change: transform, opacity;
  
  /* Ensure text doesn't get cut off harshly */
  white-space: nowrap; 
  width: auto;
  max-width: 120%; /* Allow slight bleed but control it */
}

/* Bold Positioning: I (Origin Point) */
body.home #archive .paper:nth-of-type(1) .script-note { 
  top: -8%; 
  left: 0%; /* Pulled back from -8% */
  transform: rotate(-12deg); 
}

/* Bold Positioning: II (Entropy Rising) */
body.home #archive .paper:nth-of-type(2) .script-note { 
  top: 15%; 
  right: -5%; /* Pulled back from -12% */
  left: auto;
  transform: rotate(6deg); 
  /* Slightly larger for impact but safe */
  font-size: clamp(6rem, 12vw, 14rem); 
}

/* Bold Positioning: III (System Halt) */
body.home #archive .paper:nth-of-type(3) .script-note { 
  bottom: -8%; 
  left: 0%; /* Pulled back from -5% */
  top: auto;
  transform: rotate(-4deg); 
}

/* Hover: The "3D Float" (Parallax) */
body.home #archive .paper:hover .script-note {
  opacity: 1;
  /* Lift up and straighten */
  transform: scale(1.1) translateY(-20px) rotate(0deg) !important;
  text-shadow: 
    0 10px 20px rgba(0,0,0, 0.5),
    0 0 10px var(--accent);
}

/* =========================================================
   Cursor Glow
   ========================================================= */
body.home #cursor-glow {
  position: fixed; left: 0; top: 0; width: 80vw; height: 80vw;
  margin-left: -40vw; margin-top: -40vw;
  background: radial-gradient(circle, rgba(217, 4, 41, 0.08) 0%, rgba(0, 0, 0, 0) 60%);
  pointer-events: none; z-index: 2;
  transform: translate3d(var(--mouse-x), var(--mouse-y), 0);
  opacity: 0; transition: opacity 0.35s ease;
  mix-blend-mode: screen;
}
body.home.glow-active #cursor-glow { opacity: 1; }

/* =========================================================
   Responsive Fixes
   ========================================================= */
@media (max-width: 900px) {
  body.home main > header { padding: 160px 0 90px; }
  
  body.home #archive .paper {
    grid-template-columns: 1fr; grid-template-rows: auto auto auto;
    padding: 80px 24px; gap: 30px;
    transform: none !important; width: 100% !important; margin-left: 0 !important;
    opacity: 1 !important; filter: none !important;
  }
  
  /* Disable hover effects on mobile */
  body.home #archive:has(.paper:hover) .paper { opacity: 1; filter: none; transform: none; }
  
  body.home #archive .k, body.home #archive .actions {
    grid-column: 1; align-items: flex-start; text-align: left; justify-content: flex-start;
  }
  body.home #archive .pill { width: 100%; min-width: 0; }
  
  /* Fix Script Note Clipping on Mobile */
  body.home #archive .script-note {
    font-size: 15vw !important; /* Responsive size */
    opacity: 0.8; 
    position: relative;
    top: auto !important; left: auto !important; right: auto !important; bottom: auto !important;
    display: block; 
    margin-bottom: 10px; 
    transform: rotate(-3deg);
    
    /* Allow wrapping if words are too long */
    white-space: normal; 
    text-align: left;
  }
}

@media (prefers-reduced-motion: reduce) {
  body.home::after, body.home #cursor-glow { opacity: 0 !important; }
  body.home #archive .paper, body.home #archive .script-note {
    transform: none !important; box-shadow: none !important; transition: none !important;
  }
}
