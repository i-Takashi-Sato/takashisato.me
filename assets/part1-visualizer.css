.visualizer-wrapper{
  width:100%;
  margin:5rem 0;
  position:relative;
  border:1px solid var(--border-sharp, rgba(255,255,255,0.12));
  border-radius:0;
  background: rgba(5,5,8,0.55);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: 0 20px 60px -20px rgba(0,0,0,0.6);
  overflow: visible;
  z-index:auto;
}

.visualizer-wrapper.viz-bleed{
  width:100vw;
  left:50%;
  margin-left:-50vw;
  margin-right:0;
}

.visualizer-wrapper.viz-bleed .altrion-viz{
  max-width:1600px;
  margin:0 auto;
}

.visualizer-wrapper::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.2) 50%);
  background-size:100% 4px;
  pointer-events:none;
  z-index:2;
  opacity:0.18;
}

.visualizer-wrapper .altrion-viz{
  --bg-void:   var(--bg, #050507);
  --bg-panel:  var(--card-bg, #0f0f12);
  --ink-head:  var(--text-head, #ffffff);
  --ink-data:  var(--text-main, #e0e0e0);
  --ink-dim:   var(--text-muted, #a0a0b0);
  --line-struct: var(--border-sharp, rgba(255,255,255,0.12));
  --line-soft: rgba(255,255,255,0.06);
  --sig-err:  #ff3333;

  font-family:"Inter", system-ui, -apple-system, sans-serif;
  color:var(--ink-data);
  background: transparent;
  border:none;
  width:100%;
  position:relative;
  isolation:isolate;
}

.visualizer-wrapper .altrion-viz *{
  box-sizing:border-box;
  border-radius:0;
}

.visualizer-wrapper .altrion-viz .altrion-top{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  gap:16px;
  padding: 24px 28px;
  border-bottom:1px solid var(--line-struct);
  background: rgba(5,5,8,0.35);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  position:relative;
  z-index:3;
}

.visualizer-wrapper .altrion-viz .altrion-brand h2{
  margin:0 0 6px 0;
  font-size:0.9rem;
  font-weight:700;
  letter-spacing:0.06em;
  text-transform:uppercase;
  color:var(--ink-head);
}

.visualizer-wrapper .altrion-viz .altrion-brand p{
  margin:0;
  max-width:68ch;
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.75rem;
  line-height:1.55;
  color:var(--ink-dim);
}

.visualizer-wrapper .altrion-viz .altrion-pillrow{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.visualizer-wrapper .altrion-viz .pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border:1px solid var(--line-struct);
  background: rgba(0,0,0,0.18);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.72rem;
  color:var(--ink-dim);
  white-space:nowrap;
}

.visualizer-wrapper .altrion-viz .pill span{
  color:var(--ink-data);
}

.visualizer-wrapper .altrion-viz .pill .dot{
  width:5px;
  height:5px;
  background:var(--ink-dim);
}

.visualizer-wrapper .altrion-viz .altrion-stage{
  padding:0;
}

.visualizer-wrapper .altrion-viz .altrion-grid{
  display:grid;
  grid-template-columns: minmax(0,1fr) minmax(360px,420px);
  min-height:640px;
  background:transparent;
}

@media (max-width:1100px){
  .visualizer-wrapper.viz-bleed{
    width:100%;
    left:auto;
    margin-left:0;
  }
  .visualizer-wrapper .altrion-viz .altrion-grid{
    grid-template-columns:1fr;
    min-height:auto;
  }
}

.visualizer-wrapper .altrion-viz .altrion-vizpane{
  position:relative;
  border-right:1px solid var(--line-struct);
  overflow:hidden;
  min-height:520px;
}

@media (max-width:1100px){
  .visualizer-wrapper .altrion-viz .altrion-vizpane{
    border-right:none;
    border-bottom:1px solid var(--line-struct);
    min-height:420px;
  }
}

.visualizer-wrapper .altrion-viz .altrion-vizpane::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background-image:
    linear-gradient(var(--line-soft) 1px, transparent 1px),
    linear-gradient(90deg, var(--line-soft) 1px, transparent 1px);
  background-size:120px 120px;
  opacity:0.22;
  z-index:0;
}

.visualizer-wrapper .altrion-viz canvas#scene{
  position:relative;
  z-index:1;
  width:100%;
  height:100%;
  opacity:0.92;
  filter: grayscale(100%) brightness(3.2) contrast(1.15) drop-shadow(0 0 6px rgba(255,255,255,0.35));
  mix-blend-mode: screen;
}

@supports not (mix-blend-mode: screen){
  .visualizer-wrapper .altrion-viz canvas#scene{
    mix-blend-mode: normal;
    filter: grayscale(100%) brightness(2.2) contrast(1.12) drop-shadow(0 0 6px rgba(255,255,255,0.25));
    opacity:1;
  }
}

.visualizer-wrapper .altrion-viz .banner{
  position:absolute;
  left:24px;
  bottom:24px;
  z-index:4;
  min-width:240px;
  max-width:min(520px, calc(100% - 48px));
  padding:12px 14px;
  border:1px solid var(--line-struct);
  background: rgba(5,5,8,0.62);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  overflow:hidden;
}

.visualizer-wrapper .altrion-viz .banner .label b{
  display:block;
  font-size:0.72rem;
  letter-spacing:0.1em;
  text-transform:uppercase;
  color:var(--ink-dim);
  margin-bottom:4px;
}

.visualizer-wrapper .altrion-viz .banner .label span{
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.75rem;
  color:var(--ink-data);
}

.visualizer-wrapper .altrion-viz .banner .state{
  margin-top:8px;
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:baseline;
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.9rem;
  color:var(--ink-head);
}

.visualizer-wrapper .altrion-viz .altrion-panel{
  background: rgba(15,15,18,0.60);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-left:1px solid var(--line-struct);
  display:flex;
  flex-direction:column;
  min-width:0;
  overflow-wrap:anywhere;
}

@media (max-width:1100px){
  .visualizer-wrapper .altrion-viz .altrion-panel{
    border-left:none;
  }
}

.visualizer-wrapper .altrion-viz .block{
  border-bottom:1px solid var(--line-struct);
  position:relative;
}

.visualizer-wrapper .altrion-viz .block .hd{
  padding:14px 16px;
  border-bottom:1px solid var(--line-soft);
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:baseline;
}

.visualizer-wrapper .altrion-viz .block .hd b{
  font-size:0.74rem;
  letter-spacing:0.08em;
  text-transform:uppercase;
  color:var(--ink-head);
  font-weight:700;
}

.visualizer-wrapper .altrion-viz .block .hd span{
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.72rem;
  color:var(--ink-dim);
  white-space:nowrap;
}

.visualizer-wrapper .altrion-viz .block .bd{
  padding:16px;
}

.visualizer-wrapper .altrion-viz .controls{
  display:grid;
  gap:16px;
}

.visualizer-wrapper .altrion-viz .row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}

@media (max-width:520px){
  .visualizer-wrapper .altrion-viz .row{
    grid-template-columns:1fr;
  }
}

.visualizer-wrapper .altrion-viz label{
  display:block;
  font-size:0.78rem;
  color:var(--ink-dim);
}

.visualizer-wrapper .altrion-viz .combo{
  position:relative;
  margin-top:8px;
}

.visualizer-wrapper .altrion-viz .comboBtn,
.visualizer-wrapper .altrion-viz button{
  width:100%;
  padding:12px 12px;
  border:1px solid var(--line-struct);
  background: rgba(0,0,0,0.10);
  color:var(--ink-data);
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.78rem;
  text-align:left;
  cursor:pointer;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease;
}

.visualizer-wrapper .altrion-viz .comboBtn:hover,
.visualizer-wrapper .altrion-viz button:hover{
  background: rgba(255,255,255,0.05);
  border-color: rgba(255,255,255,0.35);
  color:var(--ink-head);
}

.visualizer-wrapper .altrion-viz button:focus-visible,
.visualizer-wrapper .altrion-viz .comboBtn:focus-visible,
.visualizer-wrapper .altrion-viz input:focus-visible{
  outline:1px solid rgba(255,255,255,0.55);
  outline-offset:2px;
}

.visualizer-wrapper .altrion-viz .comboList{
  position:absolute;
  left:0;
  right:0;
  top: calc(100% + 6px);
  z-index:50;
  border:1px solid var(--line-struct);
  background: rgba(5,5,8,0.92);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: 0 18px 44px -20px rgba(0,0,0,0.75);
  padding:6px;
}

.visualizer-wrapper .altrion-viz .comboOpt{
  width:100%;
  padding:10px 10px;
  border:1px solid transparent;
  background: transparent;
  color:var(--ink-data);
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.78rem;
  text-align:left;
  cursor:pointer;
}

.visualizer-wrapper .altrion-viz .comboOpt:hover{
  border-color: rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  color:var(--ink-head);
}

.visualizer-wrapper .altrion-viz input[type="range"]{
  -webkit-appearance:none;
  appearance:none;
  width:100%;
  height:24px;
  background:transparent;
  margin-top:10px;
  cursor:ew-resize;
}

.visualizer-wrapper .altrion-viz input[type="range"]::-webkit-slider-runnable-track{
  height:2px;
  background: var(--line-struct);
}

.visualizer-wrapper .altrion-viz input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:6px;
  height:18px;
  margin-top:-8px;
  background:#fff;
  box-shadow: 0 0 10px rgba(255,255,255,0.55);
  border:none;
}

.visualizer-wrapper .altrion-viz input[type="range"]::-moz-range-track{
  height:2px;
  background: var(--line-struct);
}

.visualizer-wrapper .altrion-viz input[type="range"]::-moz-range-thumb{
  width:6px;
  height:18px;
  background:#fff;
  border:none;
  box-shadow: 0 0 10px rgba(255,255,255,0.45);
}

.visualizer-wrapper .altrion-viz .note{
  margin-top:10px;
  padding-top:10px;
  border-top:1px dashed var(--line-struct);
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.74rem;
  line-height:1.55;
  color:var(--ink-dim);
}

.visualizer-wrapper .altrion-viz .subgrid{
  display:grid;
  gap:0;
  border-top:1px solid var(--line-soft);
}

.visualizer-wrapper .altrion-viz .gate{
  padding:12px 16px;
  border-bottom:1px solid var(--line-struct);
  position:relative;
}

.visualizer-wrapper .altrion-viz .gTop{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:12px;
  margin-bottom:8px;
}

.visualizer-wrapper .altrion-viz .gTitle b{
  font-size:0.82rem;
  color:var(--ink-head);
  font-weight:700;
  letter-spacing:0.02em;
}

.visualizer-wrapper .altrion-viz .kv{
  display:flex;
  justify-content:space-between;
  gap:12px;
  margin-top:6px;
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.78rem;
  color:var(--ink-dim);
}

.visualizer-wrapper .altrion-viz .kv .v{
  color:var(--ink-data);
  text-align:right;
  overflow-wrap:anywhere;
}

.visualizer-wrapper .altrion-viz .split{
  display:grid;
  gap:16px;
  margin-top:16px;
}

.visualizer-wrapper .altrion-viz .case,
.visualizer-wrapper .altrion-viz .adr{
  border:1px solid var(--line-struct);
  background: rgba(0,0,0,0.12);
  padding:12px;
}

.visualizer-wrapper .altrion-viz pre{
  margin:0;
  white-space:pre-wrap;
  overflow-wrap:anywhere;
  word-break:break-word;
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.78rem;
  color:var(--ink-data);
}

.visualizer-wrapper .altrion-viz .miniBtn{
  padding:6px 10px;
  border:1px solid var(--line-struct);
  background: rgba(0,0,0,0.10);
  color:var(--ink-dim);
  font-family:"JetBrains Mono","Consolas",ui-monospace,monospace;
  font-size:0.74rem;
  cursor:pointer;
}

.visualizer-wrapper .altrion-viz .miniBtn:hover{
  border-color: rgba(255,255,255,0.35);
  color:var(--ink-head);
  background: rgba(255,255,255,0.06);
}
