.visualizer-wrapper{
  --gutter: clamp(16px, 2.5vw, 28px);
  width: calc(100vw - (var(--gutter) * 2));
  margin-left: calc(50% - 50vw + var(--gutter));
  margin-right: calc(50% - 50vw + var(--gutter));
  margin-top: 5rem;
  margin-bottom: 5rem;
  position: relative;
  z-index: 1;
}

.visualizer-wrapper .altrion-viz{
  --bg-void: rgba(5,5,5,0.78);
  --bg-panel: rgba(14,14,14,0.62);

  --line-struct: rgba(255,255,255,0.08);
  --line-strong: rgba(255,255,255,0.12);
  --line-tick: rgba(255,255,255,0.10);

  --ink-head: rgba(255,255,255,0.96);
  --ink-data: rgba(230,228,224,0.92);
  --ink-dim: rgba(255,255,255,0.55);

  --sig-ok: rgba(255,255,255,0.12);
  --sig-warn: rgba(255,255,255,0.72);
  --sig-err: #ff3333;

  --font-auth: "Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  --font-audit: "JetBrains Mono","Roboto Mono","Consolas",monospace;

  --strip: 6px;
  --shadow: 0 34px 90px -28px rgba(0,0,0,0.82);

  position: relative;
  width: 100%;
  margin: 0;

  font-family: var(--font-auth);
  color: var(--ink-data);

  background: var(--bg-void);
  border: 1px solid var(--line-struct);
  border-radius: 0;
  box-shadow: var(--shadow);
  isolation: isolate;
  overflow: hidden;

  backdrop-filter: blur(16px) saturate(1.1);
  -webkit-backdrop-filter: blur(16px) saturate(1.1);
}

.visualizer-wrapper .altrion-viz::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background-image:url("/assets/noise.webp");
  opacity:0.035;
  mix-blend-mode: overlay;
  z-index:0;
}

.visualizer-wrapper .altrion-viz::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    linear-gradient(to bottom, transparent 48%, rgba(255,255,255,0.03) 50%, transparent 52%);
  background-size:100% 4px;
  opacity:0.35;
  z-index:1;
}

.visualizer-wrapper .altrion-viz *{
  box-sizing:border-box;
  border-radius:0;
}

.visualizer-wrapper .altrion-viz .altrion-top{
  position: relative;
  z-index: 3;
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  padding:1.5rem 2rem;
  border-bottom:1px solid var(--line-struct);
  background: var(--bg-panel);
}

.visualizer-wrapper .altrion-viz .altrion-top::after{
  content:"";
  position:absolute;
  bottom:-1px;
  left:0;
  right:0;
  height:4px;
  background-image:linear-gradient(90deg,var(--line-tick) 1px,transparent 1px);
  background-size:10px 100%;
  opacity:0.45;
  pointer-events:none;
}

.visualizer-wrapper .altrion-viz .altrion-brand h2{
  font-family:var(--font-auth);
  font-size:0.80rem;
  font-weight:600;
  letter-spacing:0.10em;
  text-transform:uppercase;
  margin:0 0 0.45rem 0;
  color:var(--ink-head);
}

.visualizer-wrapper .altrion-viz .altrion-brand p{
  font-family:var(--font-audit);
  font-size:0.68rem;
  color:var(--ink-dim);
  max-width:62ch;
  line-height:1.55;
  margin:0;
}

.visualizer-wrapper .altrion-viz .altrion-pillrow{
  display:flex;
  gap:0.75rem;
}

.visualizer-wrapper .altrion-viz .pill{
  font-family:var(--font-audit);
  font-size:0.64rem;
  color:var(--ink-dim);
  background:transparent;
  border:1px solid var(--line-struct);
  padding:4px 8px;
  display:flex;
  align-items:center;
  gap:6px;
}

.visualizer-wrapper .altrion-viz .pill span{ color:var(--ink-data); }

.visualizer-wrapper .altrion-viz .dot{
  width:5px;
  height:5px;
  background:rgba(255,255,255,0.86);
  border-radius:999px;
  box-shadow:0 0 10px rgba(255,255,255,0.45);
  opacity:0.45;
}

.visualizer-wrapper .altrion-viz .altrion-stage{
  position:relative;
  z-index:2;
  padding:0;
}

.visualizer-wrapper .altrion-viz .altrion-grid{
  display:grid;
  grid-template-columns:minmax(0,1fr) 340px;
  gap:0;
  background: transparent;
}

.visualizer-wrapper .altrion-viz .altrion-vizpane{
  position:relative;
  border-right:1px solid var(--line-struct);
  overflow:hidden;
  height: clamp(420px, 56vh, 680px);
}

.visualizer-wrapper .altrion-viz .altrion-vizpane::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  background-image:
    linear-gradient(var(--line-struct) 1px,transparent 1px),
    linear-gradient(90deg,var(--line-struct) 1px,transparent 1px);
  background-size:110px 110px;
  opacity:0.18;
  z-index:0;
}

.visualizer-wrapper .altrion-viz canvas{
  width:100%;
  height:100%;
  display:block;
  opacity:0.92;
  filter:grayscale(100%) brightness(1.18) contrast(1.16);
  position:relative;
  z-index:1;
}

@supports (mix-blend-mode: screen){
  .visualizer-wrapper .altrion-viz canvas{ mix-blend-mode:screen; }
}

.visualizer-wrapper .altrion-viz .banner,
.visualizer-wrapper .altrion-viz #banner{
  position:absolute;
  bottom:1.75rem;
  left:1.75rem;
  display:flex;
  flex-direction:column;
  gap:0.5rem;
  background: rgba(5,5,5,0.86);
  border:1px solid var(--line-struct);
  z-index:2;
  min-width:220px;
  overflow:hidden;
  padding:1rem;
  padding-left:calc(1rem + var(--strip));
}

.visualizer-wrapper .altrion-viz .banner::before,
.visualizer-wrapper .altrion-viz #banner::before{
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:var(--strip);
  background:var(--sig-ok);
}

.visualizer-wrapper .altrion-viz .banner.warn::before,
.visualizer-wrapper .altrion-viz #banner.warn::before{
  background:repeating-linear-gradient(0deg,var(--sig-warn),var(--sig-warn) 2px,transparent 2px,transparent 4px);
}

.visualizer-wrapper .altrion-viz .banner.collapse::before,
.visualizer-wrapper .altrion-viz .banner.fail::before,
.visualizer-wrapper .altrion-viz .banner.danger::before,
.visualizer-wrapper .altrion-viz #banner.collapse::before,
.visualizer-wrapper .altrion-viz #banner.fail::before,
.visualizer-wrapper .altrion-viz #banner.danger::before{
  background:var(--sig-err);
  width:8px;
}

.visualizer-wrapper .altrion-viz .banner .label b,
.visualizer-wrapper .altrion-viz #banner .label b{
  font-family:var(--font-auth);
  font-size:0.70rem;
  letter-spacing:0.10em;
  color:var(--ink-dim);
  text-transform:uppercase;
}

.visualizer-wrapper .altrion-viz .banner .state,
.visualizer-wrapper .altrion-viz #banner .state{
  font-family:var(--font-audit);
  font-size:0.82rem;
  color:var(--ink-head);
}

.visualizer-wrapper .altrion-viz .altrion-panel{
  background: var(--bg-panel);
  border-left: none;
  height:auto;
  min-height:0;
  overflow:visible;
}

.visualizer-wrapper .altrion-viz .block{
  position:relative;
  border-bottom:1px solid var(--line-struct);
  background:transparent;
  box-shadow:none;
  padding-left:calc(12px + var(--strip));
}

.visualizer-wrapper .altrion-viz .block::before{
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:var(--strip);
  background:transparent;
  transition:background 0.18s;
}

.visualizer-wrapper .altrion-viz .block:hover::before{ background:var(--line-strong); }
.visualizer-wrapper .altrion-viz .block:hover{ background:rgba(255,255,255,0.02); }

.visualizer-wrapper .altrion-viz .block .hd{
  padding:12px 16px 12px 4px;
  border-bottom:1px solid var(--line-struct);
  background:transparent;
  display:flex;
  justify-content:space-between;
  align-items:baseline;
}

.visualizer-wrapper .altrion-viz .block .hd b{
  font-family:var(--font-auth);
  font-size:0.70rem;
  font-weight:600;
  text-transform:uppercase;
  color:var(--ink-head);
  letter-spacing:0.08em;
}

.visualizer-wrapper .altrion-viz .block .hd span{
  font-family:var(--font-audit);
  font-size:0.65rem;
  color:var(--ink-dim);
}

.visualizer-wrapper .altrion-viz .block .bd{ padding:16px 16px 16px 4px; }

.visualizer-wrapper .altrion-viz .controls{ display:grid; gap:1.25rem; }

.visualizer-wrapper .altrion-viz .row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:1rem;
}

.visualizer-wrapper .altrion-viz label{
  font-family:var(--font-auth);
  font-size:0.70rem;
  color:var(--ink-dim);
  margin-bottom:0.5rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.visualizer-wrapper .altrion-viz button,
.visualizer-wrapper .altrion-viz .comboBtn{
  width:100%;
  padding:10px 12px;
  background:transparent;
  border:1px solid var(--line-struct);
  color:var(--ink-data);
  font-family:var(--font-audit);
  font-size:0.70rem;
  text-align:left;
  cursor:pointer;
  transition:background 0.15s ease-out, border-color 0.15s ease-out;
}

.visualizer-wrapper .altrion-viz button:hover{
  border-color:rgba(255,255,255,0.32);
  background:rgba(255,255,255,0.05);
}

.visualizer-wrapper .altrion-viz button:focus-visible,
.visualizer-wrapper .altrion-viz input:focus-visible{
  outline:1px solid rgba(255,255,255,0.55);
  outline-offset:2px;
}

.visualizer-wrapper .altrion-viz input[type="range"]{
  -webkit-appearance:none;
  background:transparent;
  width:100%;
  margin:0;
}

.visualizer-wrapper .altrion-viz input[type="range"]::-webkit-slider-runnable-track{
  height:1px;
  background:var(--line-struct);
}

.visualizer-wrapper .altrion-viz input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:8px;
  height:16px;
  background:rgba(255,255,255,0.85);
  margin-top:-7px;
  border:none;
  box-shadow:0 0 0 1px rgba(0,0,0,0.9);
  cursor:col-resize;
}

.visualizer-wrapper .altrion-viz .subgrid{
  display:grid;
  gap:0;
  border-top:1px solid var(--line-struct);
}

.visualizer-wrapper .altrion-viz .gate{
  position:relative;
  padding:12px 0 12px 12px;
  border:none;
  border-bottom:1px solid var(--line-struct);
  background:transparent;
  margin:0;
}

.visualizer-wrapper .altrion-viz .gate::before{
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:var(--strip);
  background:transparent;
}

@supports (selector(:has(*))){
  .visualizer-wrapper .altrion-viz .gate:has(.badgeMini.warn)::before{
    background:repeating-linear-gradient(0deg,var(--sig-warn),var(--sig-warn) 2px,transparent 2px,transparent 4px);
  }
  .visualizer-wrapper .altrion-viz .gate:has(.badgeMini.danger)::before{
    background:var(--sig-err);
    width:8px;
  }
}

@media (max-width:900px){
  .visualizer-wrapper{
    --gutter: 16px;
    margin-top: 3.75rem;
    margin-bottom: 3.75rem;
  }

  .visualizer-wrapper .altrion-viz .altrion-top{
    padding:1.25rem 1rem;
  }

  .visualizer-wrapper .altrion-viz .altrion-pillrow{
    display:none;
  }

  .visualizer-wrapper .altrion-viz .altrion-grid{
    grid-template-columns:1fr;
  }

  .visualizer-wrapper .altrion-viz .altrion-vizpane{
    border-right:none;
    border-bottom:1px solid var(--line-struct);
    height: min(56vh, 420px);
    min-height: 340px;
  }

  .visualizer-wrapper .altrion-viz .altrion-top::after{ display:none; }

  .visualizer-wrapper .altrion-viz .banner,
  .visualizer-wrapper .altrion-viz #banner{
    left:1rem;
    bottom:1rem;
    min-width: 0;
    width: calc(100% - 2rem);
  }
}
